
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>developer_guide Quick Start PVXS &#8212; PVXS 1.3.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=5ecbeea2" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=12dfc556" />
    <script src="_static/documentation_options.js?v=bb516dca"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/favicon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="developer_guide Quick Start Std" href="spvaqstartstd.html" />
    <link rel="prev" title="PVA Network Configuration" href="netconfig.html" />

   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

<!-- Material Icons -->
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<!-- Material Symbols Outlined -->
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">

<!-- Inject extra CSS for pages starting with 'spva' -->
<link rel="stylesheet" type="text/css" href="_static/style.css" />


  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="guide-quick-start-pvxs">
<span id="quick-start"></span><h1><i class="material-symbols-outlined" style="vertical-align: middle;">developer_guide</i> Quick Start PVXS<a class="headerlink" href="#guide-quick-start-pvxs" title="Link to this heading">¶</a></h1>
<blockquote>
<div><p>Secure PVAccess is a version of the PVAccess protocol secured with TLS. It delivers robust
protection for EPICS network agents through zero‑trust, mutually authenticated connections
and end‑to‑end encryption. This upgrade reinforces EPICS’s authorization system by ensuring
authenticated endpoints and establishing trusted authorities. Additionally, it
incorporates a comprehensive certificate management service, <em>PVACMS</em>, that issues, and provides
status of, X.509 certificates.</p>
</div></blockquote>
<p>This section contains a Quick Start <i class="material-symbols-outlined" style="vertical-align: middle;">developer_guide</i> for Secure PVAccess.  It shows how to configure and
build <em>epics-base</em> and then <em>pvxs</em> with the Secure PVAccess
protocol enabled.  We provide containerised build instructions
that allow you to familiarize yourself with the protocol and tools before
deploying into your network.
See <a class="reference internal" href="spva.html#secure-pvaccess"><span class="std std-ref"> Secure PVAccess</span></a> for general documentation.</p>
<p>Other Quick Start Guides:</p>
<ul class="simple">
<li><p><a class="reference internal" href="spvaqstartstd.html#quick-start-std"><span class="std std-ref"> Quick Start Std</span></a></p></li>
<li><p><a class="reference internal" href="spvaqstartkrb.html#quick-start-krb"><span class="std std-ref"> Quick Start KRB</span></a></p></li>
<li><p><a class="reference internal" href="spvaqstartldap.html#quick-start-ldap"><span class="std std-ref"> Quick Start LDAP</span></a></p></li>
</ul>
<section id="learn-you-will-learn">
<h2><i class="material-symbols-outlined" style="vertical-align: middle;">local_library</i> You will learn<a class="headerlink" href="#learn-you-will-learn" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#spva-qs-build-and-deploy"><span class="std std-ref">Building and Deploying epics-base and the PVXS libraries and executables</span></a>,</p></li>
<li><p><a class="reference internal" href="#spva-qs-pvacms"><span class="std std-ref">Running PVACMS to manage certificates</span></a>,</p></li>
<li><p><a class="reference internal" href="#spva-qs-admin"><span class="std std-ref">Hands on experience with Certificate Management</span></a></p></li>
</ul>
</section>
<section id="pre-packagedprepackaged">
<h2><i class="material-symbols-outlined" style="vertical-align: middle;">deployed_code</i>Prepackaged<a class="headerlink" href="#pre-packagedprepackaged" title="Link to this heading">¶</a></h2>
<p>If you want a prepackaged environment, try the following.  You will need two terminal sessions.</p>
<section id="run-pvacms">
<h3><i class="material-symbols-outlined" style="vertical-align: middle;">counter_1</i> Run PVACMS<a class="headerlink" href="#run-pvacms" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><i class="material-icons" style="vertical-align: middle;">computer</i>¹</p></li>
<li><p>start a vm in a container named <em>ubuntu_pvxs</em> from a Prepackaged Secure PVAccess image</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>ubuntu_pvxs<span class="w"> </span>georgeleveln/pvxs:latest
</pre></div>
</div>
<ul class="simple">
<li><p>within the container, start <em>pvacms</em></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">XDG_DATA_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_DATA_HOME</span><span class="p">-~/.local/share</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">XDG_CONFIG_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="p">-~/.config</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PVXS_HOST_ARCH</span><span class="o">=</span><span class="k">$(</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>/epics-base/startup/EpicsHostArch<span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span><span class="s2">/pvxs/bin/</span><span class="si">${</span><span class="nv">PVXS_HOST_ARCH</span><span class="si">}</span><span class="s2">:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
pvacms<span class="w"> </span>-v
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Certificate DB created  : /root/.local/share/pva/1.3/certs.db</span>
<span class="go">2025-03-08T09:45:46.357411047 INFO pvxs.certs.cms 06e4748c:1314642908097862106 *=&gt; VALID</span>
<span class="go">Keychain file created   : /root/.config/pva/1.3/cert_auth.p12</span>
<span class="go">Created Default ACF file: /root/.config/pva/1.3/pvacms.acf</span>
<span class="go">2025-03-08T09:45:46.416659464 INFO pvxs.certs.cms 06e4748c:9522902379233552024 *=&gt; VALID</span>
<span class="go">Keychain file created   : /root/.config/pva/1.3/admin.p12</span>
<span class="go">2025-03-08T09:45:46.483891839 INFO pvxs.certs.cms 06e4748c:12098279511235536670 *=&gt; VALID</span>
<span class="go">Keychain file created   : /root/.config/pva/1.3/pvacms.p12</span>
<span class="go">Effective config</span>
<span class="go">EPICS_CERT_AUTH_COUNTRY=US</span>
<span class="go">EPICS_CERT_AUTH_NAME=EPICS Root Certificate Authority</span>
<span class="go">EPICS_CERT_AUTH_ORGANIZATION=certs.epics.org</span>
<span class="go">EPICS_CERT_AUTH_ORGANIZATIONAL_UNIT=EPICS Certificate Authority</span>
<span class="go">EPICS_CERT_AUTH_TLS_KEYCHAIN=/home/pvacms/.config/pva/1.3/cert_auth.p12</span>
<span class="go">EPICS_PVACMS_ACF=/home/pvacms/.config/pva/1.3/pvacms.acf</span>
<span class="go">EPICS_PVACMS_CERTS_REQUIRE_SUBSCRIPTION=YES</span>
<span class="go">EPICS_PVACMS_CERT_STATUS_VALIDITY_MINS=30m</span>
<span class="go">EPICS_PVACMS_CERT_VALIDITY=6M</span>
<span class="go">EPICS_PVACMS_DB=/home/pvacms/.local/share/pva/1.3/certs.db</span>
<span class="go">EPICS_PVACMS_DISALLOW_CUSTOM_DURATION=NO</span>
<span class="go">EPICS_PVACMS_REQUIRE_APPROVAL=YES</span>
<span class="go">EPICS_PVACMS_TLS_STOP_IF_NO_CERT=YES</span>
<span class="go">EPICS_PVAS_AUTH_COUNTRY=US</span>
<span class="go">EPICS_PVAS_AUTH_ORGANIZATION=certs.epics.org</span>
<span class="go">EPICS_PVAS_AUTH_ORGANIZATIONAL_UNIT=EPICS Certificate Authority</span>
<span class="go">EPICS_PVAS_AUTO_BEACON_ADDR_LIST=YES</span>
<span class="go">EPICS_PVAS_BROADCAST_PORT=5076</span>
<span class="go">EPICS_PVAS_CERT_PV_PREFIX=CERT</span>
<span class="go">EPICS_PVAS_SERVER_PORT=5075</span>
<span class="go">EPICS_PVAS_TLS_KEYCHAIN=/home/pvacms/.config/pva/1.3/pvacms.p12</span>
<span class="go">EPICS_PVAS_TLS_OPTIONS=client_cert=optional on_expiration=fallback-to-tcp no_revocation_check on_no_cms=fallback-to-tcp</span>
<span class="go">EPICS_PVAS_TLS_PORT=5076</span>
<span class="go">EPICS_PVAS_TLS_STOP_IF_NO_CERT=YES</span>

<span class="go">+=======================================+=======================================</span>
<span class="go">| EPICS Secure PVAccess Certificate Management Service</span>
<span class="go">+---------------------------------------+---------------------------------------</span>
<span class="go">| Certificate Database                  : /home/pvacms/.local/share/pva/1.3/certs.db</span>
<span class="go">| Certificate Authority                 : CN = EPICS Root Certificate Authority, C = US, O = certs.epics.org, OU = EPICS Certificate Authority</span>
<span class="go">| Certificate Authority Keychain File   : /home/pvacms/.config/pva/1.3/cert_auth.p12</span>
<span class="go">| PVACMS Keychain File                  : /home/pvacms/.config/pva/1.3/pvacms.p12</span>
<span class="go">| PVACMS Access Control File            : /home/pvacms/.config/pva/1.3/pvacms.acf</span>
<span class="go">+---------------------------------------+---------------------------------------</span>
<span class="go">| PVACMS [2535f0b8] Service Running     |</span>
<span class="go">+=======================================+=======================================</span>
</pre></div>
</div>
</section>
<section id="run-tools">
<h3><i class="material-symbols-outlined" style="vertical-align: middle;">counter_2</i> Run Tools<a class="headerlink" href="#run-tools" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><i class="material-icons" style="vertical-align: middle;">computer</i>²</p></li>
<li><p>in a new terminal open a new shell to the same container</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ubuntu_pvxs<span class="w"> </span>/bin/bash
</pre></div>
</div>
<ul class="simple">
<li><p>set up the environment</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">XDG_DATA_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_DATA_HOME</span><span class="p">-~/.local/share</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">XDG_CONFIG_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="p">-~/.config</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PVXS_HOST_ARCH</span><span class="o">=</span><span class="k">$(</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>/epics-base/startup/EpicsHostArch<span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span><span class="s2">/pvxs/bin/</span><span class="si">${</span><span class="nv">PVXS_HOST_ARCH</span><span class="si">}</span><span class="s2">:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_PVA_TLS_KEYCHAIN</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="si">}</span>/pva/1.3/admin.p12
</pre></div>
</div>
<ul class="simple">
<li><p>run some <em>pvxcert</em> commands</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>06e4748c:1314642908097862106
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Certificate Status:</span>
<span class="go">============================================</span>
<span class="go">Certificate ID: 06e4748c:1314642908097862106</span>
<span class="go">Status        : VALID</span>
<span class="go">Status Issued : Sat Mar 08 09:47:40 2025 UTC</span>
<span class="go">Status Expires: Sat Mar 08 10:17:40 2025 UTC</span>
<span class="go">--------------------------------------------</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>-f<span class="w"> </span>/root/.config/pva/1.3/admin.p12
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Certificate Details:</span>
<span class="go">============================================</span>
<span class="go">Certificate ID : 06e4748c:9522902379233552024</span>
<span class="go">Entity Subject : CN=admin, C=US</span>
<span class="go">Issuer Subject : CN=EPICS Root, C=US, O=certs.epics.org, OU=EPICS Certificate Authority</span>
<span class="go">Valid From     : Sat Mar 08 09:45:46 2025 UTC</span>
<span class="go">Expires On     : Mon Mar 09 09:45:46 2026 UTC</span>
<span class="go">--------------------------------------------</span>

<span class="go">Certificate Status:</span>
<span class="go">============================================</span>
<span class="go">Certificate ID: 06e4748c:9522902379233552024</span>
<span class="go">Status        : VALID</span>
<span class="go">Status Issued : Sat Mar 08 09:47:56 2025 UTC</span>
<span class="go">Status Expires: Sat Mar 08 10:17:56 2025 UTC</span>
<span class="go">--------------------------------------------</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>--revoke<span class="w"> </span>06e4748c:9522902379233552024
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Revoke ==&gt; CERT:STATUS:06e4748c:9522902379233552024 ==&gt; Completed Successfully</span>
</pre></div>
</div>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>--revoke<span class="w"> </span>06e4748c:1314642908097862106
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Revoke ==&gt; CERT:STATUS:06e4748c:1314642908097862106</span>
<span class="go">2025-03-08T09:49:08.021246627 ERR pvxs.certs.tool REVOKED operation not authorized on 06e4748c:1314642908097862106</span>
</pre></div>
</div>
</section>
</section>
<section id="step-by-step-step-by-step">
<h2><i class="material-symbols-outlined" style="vertical-align: middle;">checklist</i> Step-by-Step<a class="headerlink" href="#step-by-step-step-by-step" title="Link to this heading">¶</a></h2>
<section id="step-docker-image">
<h3><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> Docker Image<a class="headerlink" href="#step-docker-image" title="Link to this heading">¶</a></h3>
<section id="image">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_1</i> Image<a class="headerlink" href="#image" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Locate the image you want to use from the list below</p></li>
</ul>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Distribution</p></th>
<th class="head"><p>container name</p></th>
<th class="head"><p>image</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ubuntu</p></td>
<td><p>ubuntu_pvxs</p></td>
<td><p>ubuntu_latest</p></td>
</tr>
<tr class="row-odd"><td><p>RHEL</p></td>
<td><p>rhel_pvxs</p></td>
<td><p>registry.access.redhat.com/ubi8/ubi:latest</p></td>
</tr>
<tr class="row-even"><td><p>CentOS</p></td>
<td><p>centos_pvxs</p></td>
<td><p>centos_latest</p></td>
</tr>
<tr class="row-odd"><td><p>Rocky</p></td>
<td><p>rocky_pvxs</p></td>
<td><p>rocky_latest</p></td>
</tr>
<tr class="row-even"><td><p>Alma</p></td>
<td><p>alma_pvxs</p></td>
<td><p>alma_latest</p></td>
</tr>
<tr class="row-odd"><td><p>Fedora</p></td>
<td><p>fedora_pvxs</p></td>
<td><p>fedora_latest</p></td>
</tr>
<tr class="row-even"><td><p>Alpine</p></td>
<td><p>alpine_pvxs</p></td>
<td><p>alpine_latest</p></td>
</tr>
</tbody>
</table>
</section>
<section id="create">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_2</i> Create<a class="headerlink" href="#create" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><i class="material-icons" style="vertical-align: middle;">computer</i>¹</p></li>
<li><p>start a vm in a container named <em>ubuntu_pvxs</em> from a ubuntu image</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>-it<span class="w"> </span>--name<span class="w"> </span>ubuntu_pvxs<span class="w"> </span>ubuntu:latest<span class="w"> </span>/bin/bash
</pre></div>
</div>
<p>where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--name</span> <span class="pre">ubuntu_pvxs</span></code> : sets the name of the container</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ubuntu:latest</span></code> : the image we’re using for the remainder of the examples</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/bin/bash</span></code> : the command to run when entering the VM</p></li>
</ul>
</section>
</section>
<section id="step-build-pvxs">
<span id="spva-qs-build-and-deploy"></span><h3><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> Build PVXS<a class="headerlink" href="#step-build-pvxs" title="Link to this heading">¶</a></h3>
<section id="environment">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_1</i> Environment<a class="headerlink" href="#environment" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>make working directory for building project files</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PROJECT_HOME</span><span class="o">=</span>/opt/epics
mkdir<span class="w"> </span>-p<span class="w"> </span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="requirements">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_2</i> Requirements<a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h4>
<p>Select from the following installation instructions based on the image you selected:</p>
<section id="for-debian-ubuntu">
<h5>For Debian/Ubuntu<a class="headerlink" href="#for-debian-ubuntu" title="Link to this heading">¶</a></h5>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>apt-get<span class="w"> </span>update
apt-get<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>build-essential<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>git<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>openssl<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libssl-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libevent-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libsqlite3-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libcurl4-openssl-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>pkg-config
</pre></div>
</div>
</section>
<section id="for-rhel-centos-rocky-alma-linux-fedora">
<h5>For RHEL/CentOS/Rocky/Alma Linux/Fedora<a class="headerlink" href="#for-rhel-centos-rocky-alma-linux-fedora" title="Link to this heading">¶</a></h5>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>dnf<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>gcc-c++<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>git<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>make<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>openssl-devel<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libevent-devel<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>sqlite-devel<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libcurl-devel<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>pkg-config
</pre></div>
</div>
</section>
<section id="for-alpine-linux">
<h5>For Alpine Linux<a class="headerlink" href="#for-alpine-linux" title="Link to this heading">¶</a></h5>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>apk<span class="w"> </span>add<span class="w"> </span>--no-cache<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>build-base<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>git<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>openssl-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libevent-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>sqlite-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>curl-dev<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>pkgconfig
</pre></div>
</div>
</section>
<section id="for-rtems">
<h5>For RTEMS<a class="headerlink" href="#for-rtems" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>install RTEMS toolchain from <a class="reference external" href="https://docs.rtems.org/branches/master/user/start/">https://docs.rtems.org/branches/master/user/start/</a></p></li>
<li><dl class="simple">
<dt>ensure the following are built into your BSP:</dt><dd><ul>
<li><p>openssl</p></li>
<li><p>libevent</p></li>
<li><p>sqlite</p></li>
<li><p>libcurl</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>RTEMS support requires additional configuration. See RTEMS-specific documentation.</p>
</div>
</section>
<section id="for-macos">
<h5>For MacOS<a class="headerlink" href="#for-macos" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>install Homebrew if not already installed</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>/bin/bash<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;</span><span class="k">$(</span>curl<span class="w"> </span>-fsSL<span class="w"> </span>https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="k">)</span><span class="s2">&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>update Homebrew and install dependencies</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>brew<span class="w"> </span>update
brew<span class="w"> </span>install<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>openssl@3<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>libevent<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>sqlite3<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>curl<span class="w"> </span><span class="se">\</span>
<span class="w">       </span>pkg-config
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you don’t have homebrew and don’t want to install it, here’s how you would install the prerequisites.</p>
<ul class="simple">
<li><p>ensure <em>Xcode</em> Command Line Tools are installed</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>xcode-select<span class="w"> </span>--install
</pre></div>
</div>
<ul class="simple">
<li><p>install <em>OpenSSL</em></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-O<span class="w"> </span>https://www.openssl.org/source/openssl-3.1.2.tar.gz
tar<span class="w"> </span>-xzf<span class="w"> </span>openssl-3.1.2.tar.gz
<span class="nb">cd</span><span class="w"> </span>openssl-3.1.2
./Configure<span class="w"> </span>darwin64-x86_64-cc
make
sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<ul class="simple">
<li><p>install <em>libevent</em></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-O<span class="w"> </span>https://github.com/libevent/libevent/releases/download/release-2.1.12-stable/libevent-2.1.12-stable.tar.gz
tar<span class="w"> </span>-xzf<span class="w"> </span>libevent-2.1.12-stable.tar.gz
<span class="nb">cd</span><span class="w"> </span>libevent-2.1.12-stable
./configure
make
sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<ul class="simple">
<li><p>install <em>SQLite</em></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-O<span class="w"> </span>https://sqlite.org/2023/sqlite-autoconf-3430200.tar.gz
tar<span class="w"> </span>-xzf<span class="w"> </span>sqlite-autoconf-3430200.tar.gz
<span class="nb">cd</span><span class="w"> </span>sqlite-autoconf-3430200
./configure
make
sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
<ul>
<li><p>install <em>Curl</em></p></li>
<li><p>check if its already there</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>--version
</pre></div>
</div>
</li>
<li><p>if not then install it</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-O<span class="w"> </span>https://curl.se/download/curl-8.1.2.tar.gz
tar<span class="w"> </span>-xzf<span class="w"> </span>curl-8.1.2.tar.gz
<span class="nb">cd</span><span class="w"> </span>curl-8.1.2
./configure
make
sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
</li>
<li><p>install <em>pkg-config</em></p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl<span class="w"> </span>-O<span class="w"> </span>https://pkgconfig.freedesktop.org/releases/pkg-config-0.29.2.tar.gz
tar<span class="w"> </span>-xzf<span class="w"> </span>pkg-config-0.29.2.tar.gz
<span class="nb">cd</span><span class="w"> </span>pkg-config-0.29.2
./configure<span class="w"> </span>--with-internal-glib
make
<span class="w">    </span>sudo<span class="w"> </span>make<span class="w"> </span>install
</pre></div>
</div>
</div>
</section>
</section>
<section id="epics-base">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_3</i> epics-base<a class="headerlink" href="#epics-base" title="Link to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>
git<span class="w"> </span>clone<span class="w"> </span>--branch<span class="w"> </span><span class="m">7</span>.0-secure-pvaccess<span class="w"> </span>https://github.com/george-mcintyre/epics-base.git
<span class="nb">cd</span><span class="w"> </span>epics-base

make<span class="w"> </span>-j10<span class="w"> </span>all
<span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>
</pre></div>
</div>
</section>
<section id="configure">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_4</i> Configure<a class="headerlink" href="#configure" title="Link to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>
cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>RELEASE.local<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">EPICS_BASE = \$(TOP)/../epics-base</span>
<span class="s">EOF</span>
</pre></div>
</div>
</section>
<section id="build">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_5</i> Build<a class="headerlink" href="#build" title="Link to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>
cat<span class="w"> </span>&gt;&gt;<span class="w"> </span>CONFIG_SITE.local<span class="w"> </span><span class="s">&lt;&lt;EOF</span>
<span class="s">PVXS_ENABLE_PVACMS = YES</span>
<span class="s">EOF</span>

git<span class="w"> </span>clone<span class="w"> </span>--recursive<span class="w">  </span>--branch<span class="w"> </span>tls<span class="w"> </span>https://github.com/george-mcintyre/pvxs.git
<span class="nb">cd</span><span class="w"> </span>pvxs

make<span class="w"> </span>-j10<span class="w"> </span>all
<span class="nb">cd</span><span class="w"> </span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>
</pre></div>
</div>
</section>
</section>
<section id="step-pvacms">
<span id="spva-qs-pvacms"></span><h3><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> PVACMS<a class="headerlink" href="#step-pvacms" title="Link to this heading">¶</a></h3>
<section id="id1">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_1</i> Configure<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Environment</p>
<ul>
<li><p>set up XDG environment if not already set</p></li>
</ul>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">XDG_DATA_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_DATA_HOME</span><span class="p">-~/.local/share</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">XDG_CONFIG_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="p">-~/.config</span><span class="si">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>PATH</p>
<ul>
<li><p>set PATH to include Secure PVAccess executables</p></li>
</ul>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PVXS_HOST_ARCH</span><span class="o">=</span><span class="k">$(</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>/epics-base/startup/EpicsHostArch<span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span><span class="s2">/pvxs/bin/</span><span class="si">${</span><span class="nv">PVXS_HOST_ARCH</span><span class="si">}</span><span class="s2">:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>optionally</em></p>
<ul>
<li><p>Configure Certificate database file location*</p></li>
</ul>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_PVACMS_DB</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_DATA_HOME</span><span class="si">}</span>/pva/1.3/certs.db
</pre></div>
</div>
<ul class="simple">
<li><p><em>optionally</em></p>
<ul>
<li><p>Configure root certificate authority keychain file location</p></li>
<li><p>Place your certificate authority’s certificate and key in this file if you have one</p></li>
</ul>
</li>
</ul>
<p>otherwise the certificate authority certificate will be created here</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CERT_AUTH_TLS_KEYCHAIN</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="si">}</span>/pva/1.3/cert_auth.p12
</pre></div>
</div>
<ul class="simple">
<li><p><em>optionally</em></p>
<ul>
<li><p>Specify the subject name of your Root Certificate Authority in case you don’t provide a Root Certificate Authority certificate and it needs to be created</p></li>
</ul>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CERT_AUTH_NAME</span><span class="o">=</span><span class="s2">&quot;EPICS Root Certificate Authority&quot;</span><span class="w">           </span><span class="c1"># CN</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CERT_AUTH_ORGANIZATION</span><span class="o">=</span><span class="s2">&quot;certs.epics.org&quot;</span><span class="w">                    </span><span class="c1"># O</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CERT_AUTH_ORGANIZATIONAL_UNIT</span><span class="o">=</span><span class="s2">&quot;EPICS Certificate Authority&quot;</span><span class="w"> </span><span class="c1"># OU</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_CERT_AUTH_COUNTRY</span><span class="o">=</span><span class="s2">&quot;US&quot;</span><span class="w">                                     </span><span class="c1"># C</span>
</pre></div>
</div>
<ul class="simple">
<li><p><em>optionally</em></p>
<ul>
<li><p>Configure PVACMS Keychain file location</p></li>
<li><p>The PVACMS keychain file will be created at this location if it does not exist</p></li>
</ul>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_PVACMS_TLS_KEYCHAIN</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="si">}</span>/pva/1.3/pvacms.p12
</pre></div>
</div>
<ul class="simple">
<li><p><em>optionally</em></p>
<ul>
<li><p>Configure Admin User Keychain file location</p></li>
<li><p>An Admin User keychain file will be created at this location if it does not exist</p></li>
</ul>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_ADMIN_TLS_KEYCHAIN</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="si">}</span>/pva/1.3/admin.p12
</pre></div>
</div>
<ul class="simple">
<li><p><em>optionally</em></p>
<ul>
<li><p>Configure PVACMS ADMIN user Access Control File (ACF) location</p></li>
<li><p>An ACF file that controls access to PVACMS resources (certificates, etc.) is created at this location if it does not exist</p></li>
<li><p>By default the file created ensures that administrator permissions are granted to any user that presents a certificate that is signed by the configured Root Certificate Authority and has CN=”admin”, O=””, OU=””, C=”US”</p></li>
<li><p>You can modify this file to add other admin users to the UAG section, or conditions to an existing or new RULES section</p></li>
</ul>
</li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_PVACMS_ACF</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="si">}</span>/pva/1.3/pvacms.acf
</pre></div>
</div>
</section>
<section id="run">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_2</i> Run<a class="headerlink" href="#run" title="Link to this heading">¶</a></h4>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvacms<span class="w"> </span>-v
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Certificate DB created  : /root/.local/share/pva/1.3/certs.db</span>
<span class="go">2025-03-04T14:53:32.401223876 INFO pvxs.certs.cms 2535f0b8:7554235394877908901 *=&gt; VALID</span>
<span class="go">Keychain file created   : /root/.config/pva/1.3/cert_auth.p12</span>
<span class="go">Created Default ACF file: /root/.config/pva/1.3/pvacms.acf</span>
<span class="go">2025-03-04T14:53:32.538922876 INFO pvxs.certs.cms 2535f0b8:7810503273530005364 *=&gt; VALID</span>
<span class="go">Keychain file created   : /root/.config/pva/1.3/admin.p12</span>
<span class="go">2025-03-04T14:53:32.589539542 INFO pvxs.certs.cms 2535f0b8:15782598755272381308 *=&gt; VALID</span>
<span class="go">Keychain file created   : /root/.config/pva/1.3/pvacms.p12</span>
<span class="go">Effective config</span>
<span class="go">EPICS_CERT_AUTH_COUNTRY=US</span>
<span class="go">EPICS_CERT_AUTH_NAME=EPICS Root Certificate Authority</span>
<span class="go">EPICS_CERT_AUTH_ORGANIZATION=certs.epics.org</span>
<span class="go">EPICS_CERT_AUTH_ORGANIZATIONAL_UNIT=EPICS Certificate Authority</span>
<span class="go">EPICS_CERT_AUTH_TLS_KEYCHAIN=/home/pvacms/.config/pva/1.3/cert_auth.p12</span>
<span class="go">EPICS_PVACMS_ACF=/home/pvacms/.config/pva/1.3/pvacms.acf</span>
<span class="go">EPICS_PVACMS_CERTS_REQUIRE_SUBSCRIPTION=DEFAULT</span>
<span class="go">EPICS_PVACMS_CERT_STATUS_VALIDITY_MINS=30m</span>
<span class="go">EPICS_PVACMS_CERT_VALIDITY=6M</span>
<span class="go">EPICS_PVACMS_DB=/home/pvacms/.local/share/pva/1.3/certs.db</span>
<span class="go">EPICS_PVACMS_DISALLOW_CUSTOM_DURATION=NO</span>
<span class="go">EPICS_PVACMS_REQUIRE_APPROVAL=YES</span>
<span class="go">EPICS_PVACMS_TLS_STOP_IF_NO_CERT=YES</span>
<span class="go">EPICS_PVAS_AUTH_COUNTRY=US</span>
<span class="go">EPICS_PVAS_AUTH_ORGANIZATION=certs.epics.org</span>
<span class="go">EPICS_PVAS_AUTH_ORGANIZATIONAL_UNIT=EPICS Certificate Authority</span>
<span class="go">EPICS_PVAS_AUTO_BEACON_ADDR_LIST=YES</span>
<span class="go">EPICS_PVAS_BROADCAST_PORT=5076</span>
<span class="go">EPICS_PVAS_CERT_PV_PREFIX=CERT</span>
<span class="go">EPICS_PVAS_SERVER_PORT=5075</span>
<span class="go">EPICS_PVAS_TLS_KEYCHAIN=/home/pvacms/.config/pva/1.3/pvacms.p12</span>
<span class="go">EPICS_PVAS_TLS_OPTIONS=client_cert=optional on_expiration=fallback-to-tcp no_revocation_check on_no_cms=fallback-to-tcp</span>
<span class="go">EPICS_PVAS_TLS_PORT=5076</span>
<span class="go">EPICS_PVAS_TLS_STOP_IF_NO_CERT=YES</span>

<span class="go">+=======================================+=======================================</span>
<span class="go">| EPICS Secure PVAccess Certificate Management Service</span>
<span class="go">+---------------------------------------+---------------------------------------</span>
<span class="go">| Certificate Database                  : /home/pvacms/.local/share/pva/1.3/certs.db</span>
<span class="go">| Certificate Authority                 : CN = EPICS Root Certificate Authority, C = US, O = certs.epics.org, OU = EPICS Certificate Authority</span>
<span class="go">| Certificate Authority Keychain File   : /home/pvacms/.config/pva/1.3/cert_auth.p12</span>
<span class="go">| PVACMS Keychain File                  : /home/pvacms/.config/pva/1.3/pvacms.p12</span>
<span class="go">| PVACMS Access Control File            : /home/pvacms/.config/pva/1.3/pvacms.acf</span>
<span class="go">+---------------------------------------+---------------------------------------</span>
<span class="go">| PVACMS [2535f0b8] Service Running     |</span>
<span class="go">+=======================================+=======================================</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Make a note of the certificates that are created</p>
<ul class="simple">
<li><p><code class="xref cpp cpp-any docutils literal notranslate"><span class="pre">2535f0b8:7554235394877908901</span></code>  : Root Certificate Authority Certificate</p></li>
<li><p><code class="xref cpp cpp-any docutils literal notranslate"><span class="pre">2535f0b8:7810503273530005364</span></code>  : Admin User Certificate</p></li>
<li><p><code class="xref cpp cpp-any docutils literal notranslate"><span class="pre">2535f0b8:15782598755272381308</span></code> : PVACMS Server Certificate</p></li>
</ul>
</div>
</section>
</section>
<section id="step-test">
<span id="spva-qs-admin"></span><h3><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> Test<a class="headerlink" href="#step-test" title="Link to this heading">¶</a></h3>
<section id="id2">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_1</i>  Configure<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p><i class="material-icons" style="vertical-align: middle;">computer</i>²</p></li>
<li><p>in a different terminal open a shell to the same container:</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ubuntu_pvxs<span class="w"> </span>/bin/bash
</pre></div>
</div>
<hr class="docutils" />
<ul class="simple">
<li><p>set up XDG environment if not already set, and set PATH</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">PROJECT_HOME</span><span class="o">=</span>/opt/epics
<span class="nb">export</span><span class="w"> </span><span class="nv">XDG_DATA_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_DATA_HOME</span><span class="p">-~/.local/share</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">XDG_CONFIG_HOME</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="p">-~/.config</span><span class="si">}</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PVXS_HOST_ARCH</span><span class="o">=</span><span class="k">$(</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span>/epics-base/startup/EpicsHostArch<span class="k">)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">PROJECT_HOME</span><span class="si">}</span><span class="s2">/pvxs/bin/</span><span class="si">${</span><span class="nv">PVXS_HOST_ARCH</span><span class="si">}</span><span class="s2">:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</pre></div>
</div>
<hr class="docutils" />
<ul class="simple">
<li><p>configure the location of the Admin User’s keychain file.</p></li>
</ul>
<p>We will be carrying out some protected operations so we will need to have access
to the Admin User’s keychain file</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EPICS_PVA_TLS_KEYCHAIN</span><span class="o">=</span><span class="si">${</span><span class="nv">XDG_CONFIG_HOME</span><span class="si">}</span>/pva/1.3/admin.p12
</pre></div>
</div>
</section>
<section id="get-status">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_2</i>Get Status<a class="headerlink" href="#get-status" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>get the status of Root Certificate Authority Certificate</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>2535f0b8:7554235394877908901
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Certificate Status:</span>
<span class="go">============================================</span>
<span class="go">Certificate ID: 2535f0b8:7554235394877908901</span>
<span class="go">Status        : VALID</span>
<span class="go">Status Issued : Tue Mar 04 15:27:10 2025 UTC</span>
<span class="go">Status Expires: Tue Mar 04 15:57:10 2025 UTC</span>
<span class="go">--------------------------------------------</span>
</pre></div>
</div>
<ul class="simple">
<li><p>check status of the Admin Certificate by file name</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>-f<span class="w"> </span>/root/.config/pva/1.3/admin.p12
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Certificate Details:</span>
<span class="go">============================================</span>
<span class="go">Certificate ID : 2535f0b8:7810503273530005364</span>
<span class="go">Entity Subject : CN=admin, C=US</span>
<span class="go">Issuer Subject : CN=EPICS Root Certificate Authority, C=US, O=certs.epics.org, OU=EPICS Certificate Authority</span>
<span class="go">Valid From     : Tue Mar 04 14:53:32 2025 UTC</span>
<span class="go">Expires On     : Thu Mar 05 14:53:32 2026 UTC</span>
<span class="go">--------------------------------------------</span>

<span class="go">Certificate Status:</span>
<span class="go">============================================</span>
<span class="go">Certificate ID: 2535f0b8:7810503273530005364</span>
<span class="go">Status        : VALID</span>
<span class="go">Status Issued : Tue Mar 04 15:29:54 2025 UTC</span>
<span class="go">Status Expires: Tue Mar 04 15:59:54 2025 UTC</span>
<span class="go">--------------------------------------------</span>
</pre></div>
</div>
</section>
<section id="revoke">
<h4><i class="material-symbols-outlined" style="vertical-align: middle;">counter_3</i> Revoke<a class="headerlink" href="#revoke" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>revoke Admin User’s certificate.</p></li>
</ul>
<p>Once this completes, the Admin user will lose administrator
status</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>--revoke<span class="w"> </span>2535f0b8:7810503273530005364
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Revoke ==&gt; CERT:STATUS:2535f0b8:7810503273530005364 ==&gt; Completed Successfully</span>
</pre></div>
</div>
<hr class="docutils" />
<ul class="simple">
<li><p>try to revoke Root Certificate Authority Certificate</p></li>
</ul>
<p>Fail because Admin User’s Certificate has been revoked</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvxcert<span class="w"> </span>--revoke<span class="w"> </span>2535f0b8:7554235394877908901
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Revoke ==&gt; CERT:STATUS:2535f0b8:7554235394877908901</span>
<span class="go">2025-03-04T15:38:09.101065420 ERR pvxs.certs.tool REVOKED operation not authorized on 2535f0b8:7554235394877908901</span>
</pre></div>
</div>
<hr class="docutils" />
<p>regenerate admin certificate</p>
<ul class="simple">
<li><p>in the other other terminal window,  Stop PVACMS (ctrl-C)</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>^C
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">PVACMS [2535f0b8] Service Exiting</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Create a new Admin User Certificate</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvacms<span class="w"> </span>--admin-keychain-new<span class="w"> </span>admin
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">2025-03-04T15:40:38.519777878 WARN pvxs.certs.file</span>
<span class="go">    Cert file backed up: /root/.config/pva/1.3/admin.p12 ==&gt; /root/.config/pva/1.3/admin.2503041540.p12</span>
<span class="go">Keychain file created   : /root/.config/pva/1.3/admin.p12</span>
<span class="go">Admin user &quot;admin&quot; has been added to list of administrators of this PVACMS</span>
<span class="go">Restart the PVACMS for it to take effect</span>
</pre></div>
</div>
<ul class="simple">
<li><p>Restart PVACMS</p></li>
</ul>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pvacms
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">PVACMS [2535f0b8] Service Running</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">PVXS</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="netconfig.html">PVA Network Configuration</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#"><i class="material-symbols-outlined" style="vertical-align: middle;">developer_guide</i> Quick Start PVXS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#learn-you-will-learn"><i class="material-symbols-outlined" style="vertical-align: middle;">local_library</i> You will learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pre-packagedprepackaged"><i class="material-symbols-outlined" style="vertical-align: middle;">deployed_code</i>Prepackaged</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#run-pvacms"><i class="material-symbols-outlined" style="vertical-align: middle;">counter_1</i> Run PVACMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-tools"><i class="material-symbols-outlined" style="vertical-align: middle;">counter_2</i> Run Tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#step-by-step-step-by-step"><i class="material-symbols-outlined" style="vertical-align: middle;">checklist</i> Step-by-Step</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-docker-image"><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> Docker Image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-build-pvxs"><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> Build PVXS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-pvacms"><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> PVACMS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#step-test"><i class="material-symbols-outlined" style="vertical-align: middle;">done_all</i> Test</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="spvaqstartstd.html"><i class="material-symbols-outlined" style="vertical-align: middle;">developer_guide</i> Quick Start Std</a></li>
<li class="toctree-l1"><a class="reference internal" href="spvaqstartkrb.html"><i class="material-symbols-outlined" style="vertical-align: middle;">developer_guide</i> Quick Start KRB</a></li>
<li class="toctree-l1"><a class="reference internal" href="spvaqstartldap.html"><i class="material-symbols-outlined" style="vertical-align: middle;">developer_guide</i> Quick Start LDAP</a></li>
<li class="toctree-l1"><a class="reference internal" href="spva.html"><i class="material-symbols-outlined" style="vertical-align: middle;">security</i> Secure PVAccess</a></li>
<li class="toctree-l1"><a class="reference internal" href="spvaauth.html"><i class="material-symbols-outlined" style="vertical-align: middle;">security</i> AuthN &amp; AuthZ</a></li>
<li class="toctree-l1"><a class="reference internal" href="spvacerts.html"><i class="material-symbols-outlined" style="vertical-align: middle;">security</i> Cert Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html">Building from Source</a></li>
<li class="toctree-l1"><a class="reference internal" href="building.html#including-pvxs-in-your-application">Including PVXS in your application</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="value.html">Value Container API</a></li>
<li class="toctree-l1"><a class="reference internal" href="client.html">Client API</a></li>
<li class="toctree-l1"><a class="reference internal" href="server.html">Server API</a></li>
<li class="toctree-l1"><a class="reference internal" href="ioc.html">IOC Integration</a></li>
<li class="toctree-l1"><a class="reference internal" href="ioc.html#qsrv-2">QSRV 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="util.html">Misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="details.html">Details</a></li>
<li class="toctree-l1"><a class="reference internal" href="spvaglossary.html"><i class="material-symbols-outlined" style="vertical-align: middle;">security</i> SPVA Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="releasenotes.html">Release Notes</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="netconfig.html" title="previous chapter">PVA Network Configuration</a></li>
      <li>Next: <a href="spvaqstartstd.html" title="next chapter"><i class="material-symbols-outlined" style="vertical-align: middle;">developer_guide</i> Quick Start Std</a></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2025 Michael Davidsaver, George McIntyre, Osprey DCS LLC, and SLAC.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="_sources/spvaqstart.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>